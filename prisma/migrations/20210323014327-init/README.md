# Migration `20210323014327-init`

This migration has been generated by Laura at 3/23/2021, 12:43:27 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TYPE "Role" AS ENUM ('BRAND', 'CREATOR')

CREATE TYPE "Status" AS ENUM ('ACCEPTED', 'EXPIRED', 'PENDING', 'REJECTED')

CREATE TABLE "public"."Application" (
"id" SERIAL,
"creatorId" integer   NOT NULL ,
"campaignId" integer   NOT NULL ,
"status" "Status"  NOT NULL DEFAULT E'PENDING',
"createdAt" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."Brand" (
"id" SERIAL,
"name" text   NOT NULL ,
"description" text   NOT NULL ,
"logoUrl" text   NOT NULL ,
"categoryId" integer   NOT NULL ,
"createdAt" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP,
"status" "Status"  NOT NULL DEFAULT E'PENDING',
PRIMARY KEY ("id")
)

CREATE TABLE "public"."Campaign" (
"id" SERIAL,
"title" text   NOT NULL ,
"imageUrl" text   ,
"startDate" timestamp(3)   NOT NULL ,
"endDate" timestamp(3)   NOT NULL ,
"description" text   NOT NULL ,
"brief" text   NOT NULL ,
"brandId" integer   NOT NULL ,
"categoryId" integer   NOT NULL ,
"status" "Status"  NOT NULL DEFAULT E'PENDING',
"createdAt" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."Category" (
"id" SERIAL,
"name" text   NOT NULL ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."Contact" (
"id" SERIAL,
"name" text   NOT NULL ,
"email" text   NOT NULL ,
"type" "Role"  ,
"message" text   ,
"companyName" text   ,
"website" text   ,
"createdAt" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."Creator" (
"id" SERIAL,
"displayName" text   ,
"location" text   ,
"instragramId" text   NOT NULL ,
"bio" text   ,
"advocates" text   ,
"userId" integer   NOT NULL ,
"status" "Status"  NOT NULL DEFAULT E'PENDING',
PRIMARY KEY ("id")
)

CREATE TABLE "public"."User" (
"id" SERIAL,
"name" text   NOT NULL ,
"email" text   NOT NULL ,
"role" "Role"  NOT NULL ,
"creatorId" integer   ,
"brandId" integer   ,
"createdAt" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY ("id")
)

CREATE UNIQUE INDEX "User.email_unique" ON "public"."User"("email")

CREATE UNIQUE INDEX "User.creatorId_unique" ON "public"."User"("creatorId")

ALTER TABLE "public"."Application" ADD FOREIGN KEY ("campaignId")REFERENCES "public"."Campaign"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."Application" ADD FOREIGN KEY ("creatorId")REFERENCES "public"."Creator"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."Brand" ADD FOREIGN KEY ("categoryId")REFERENCES "public"."Category"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."Campaign" ADD FOREIGN KEY ("brandId")REFERENCES "public"."Brand"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."Campaign" ADD FOREIGN KEY ("categoryId")REFERENCES "public"."Category"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."User" ADD FOREIGN KEY ("brandId")REFERENCES "public"."Brand"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "public"."User" ADD FOREIGN KEY ("creatorId")REFERENCES "public"."Creator"("id") ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20210323014327-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,103 @@
+generator client {
+  provider = "prisma-client-js"
+}
+
+datasource db {
+  provider = "postgresql"
+  url = "***"
+}
+
+model Application {
+  id         Int      @default(autoincrement()) @id
+  creatorId  Int
+  campaignId Int
+  status     Status   @default(PENDING)
+  Campaign   Campaign @relation(fields: [campaignId], references: [id])
+  Creator    Creator  @relation(fields: [creatorId], references: [id])
+  createdAt  DateTime @default(now())
+}
+
+model Brand {
+  id          Int        @default(autoincrement()) @id
+  name        String
+  description String
+  logoUrl     String
+  categoryId  Int
+  createdAt   DateTime   @default(now())
+  status      Status     @default(PENDING)
+  Category    Category   @relation(fields: [categoryId], references: [id])
+  Campaign    Campaign[]
+  User        User[]
+}
+
+model Campaign {
+  id          Int           @default(autoincrement()) @id
+  title       String
+  imageUrl    String?
+  startDate   DateTime
+  endDate     DateTime
+  description String
+  brief       String
+  brandId     Int
+  categoryId  Int
+  status      Status        @default(PENDING)
+  createdAt   DateTime      @default(now())
+  Brand       Brand         @relation(fields: [brandId], references: [id])
+  Category    Category      @relation(fields: [categoryId], references: [id])
+  Application Application[]
+}
+
+model Category {
+  id       Int        @default(autoincrement()) @id
+  name     String
+  Brand    Brand[]
+  Campaign Campaign[]
+}
+
+model Contact {
+  id          Int      @default(autoincrement()) @id
+  name        String
+  email       String
+  type        Role?
+  message     String?
+  companyName String?
+  website     String?
+  createdAt   DateTime @default(now())
+}
+
+model Creator {
+  id           Int           @default(autoincrement()) @id
+  displayName  String?
+  location     String?
+  instragramId String
+  bio          String?
+  advocates    String?
+  userId       Int
+  status       Status        @default(PENDING)
+  Application  Application[]
+  User         User?
+}
+
+model User {
+  id        Int      @default(autoincrement()) @id
+  name      String
+  email     String   @unique
+  role      Role
+  creatorId Int?     @unique
+  brandId   Int?
+  createdAt DateTime @default(now())
+  Brand     Brand?   @relation(fields: [brandId], references: [id])
+  Creator   Creator? @relation(fields: [creatorId], references: [id])
+}
+
+enum Role {
+  BRAND
+  CREATOR
+}
+
+enum Status {
+  ACCEPTED
+  EXPIRED
+  PENDING
+  REJECTED
+}
```


